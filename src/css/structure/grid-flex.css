/*
      Grid 
-------------------------------

Using Flexbox

*/

.container {
	padding-left: $container-padding * 1rem;
	padding-right: $container-padding * 1rem;
	margin-right: auto;
	margin-left: auto;
}
.grid {
	margin-right: -$gutter * 1rem;
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  align-content: flex-start;
	clear: both;
	&:after {
    content: "";
    display: table;
    clear: both;
	}
}

.bloc {
	margin-right: $gutter * 1rem;
  flex: 0 1 100%;
}

.bloc-left {
	flex: 0 1 auto;
}

.bloc-n {
	flex: 1 1 auto;
	min-width: ($col-width - $gutter) * 1rem;
}

$one-half: ($col-width / 2) - $gutter  * 1rem;
$one-third: ($col-width / 3) - $gutter  * 1rem;
$two-third: ($col-width * 2 / 3) - $gutter  * 1rem;

.bloc-one-half {
  flex: 0 1 $one-half;
}

.bloc-one-third {
	flex: 0 1 $one-third;
  text-align: center;
}

.bloc-two-third {
	flex: 0 1 27.9%;
}

$screen-s-width: $col-min * $col-width - $gutter + (2 * $container-padding) + $base-unit * 1rem;

@media (min-width: $screen-s-width) {
	.bloc-height {
		overflow: hidden;
		height: (($col-width - $gutter) * 1.5 - $gutter) * 1rem;
	}
	.bloc-height img {
		max-width: 102%;
		margin-left: -1%;
		margin-top: -1%;
	}
}

// looping over the different screen sizes
@each $screen, $col in $screens {

  $width: ($col * $col-width - $gutter);

  @if $col < $col-min {
    $width: ($col-min * $col-width - $gutter);
  } @else if $col > $col-max {
    $width: ($col-max * $col-width - $gutter);
  }

  $container-width: $width + (2 * $container-padding);

	@media (min-width: $container-width + $base-unit * 1rem) {
	  .container {
		  width: $container-width * 1rem;
	   }
		.show-#{$screen} {
			display: block !important;
			visibility: visible !important;
		}

		@for $i from 1 through $col-max {

      %bloc-width-#{$screen}-#{$i} {
        flex: 0 1 (($col-width * $i) - $gutter) * 1rem;
      }
		}

		.#{$screen}-right {
			margin-left: auto;
		}

		@each $screen-n, $col-n in $screens {

			@if $col >= $col-n {

				@for $i from 1 through $col-max {



// bloc-$i width
// -------------
//
//   width         1           2            3            4            5         6
//   $col = 1
//       xxs       1 to 7 /a   -            -            -            -         -
//
//   $col = 2
//      xxs        (1)         2 to 7 /a    -            -            -         -
//      xs         1 /b        2 to 7 /a    -            -            -         -
//
//   $col = 3
//      xxs        (1)         (2)          3 to 7 /a    -            -         -
//      xs         (1)         (2)          3 to 7 /a    -            -         -
//      s          1 /b        2 /b         3 to 7 /a    -            -         -
//
//   $col = 4
//     xxs        (1)          (2)         (3)           4 to 7 /a    -         -
//     xs         (1)          (2)         (3)           4 to 7 /a    -         -
//     s          (1)          (2)         (3)           4 to 7 /a    -         -
//     m          1 /b         2 /b        3 /b          4 to 7 /a    -         -
//
//   etc.


          .bloc-#{$screen-n}-#{$i} {
// a:
            @if $i >= $col {
  						@extend %bloc-width-#{$screen}-#{$col};
            }
// b:
            @else if $col-n == $col {
              @extend %bloc-width-#{$screen}-#{$i};
  					}
          }


// bloc-$i-$j width
// ----------------
//
//   width         1                1            2         3         4         5
//   $col = 2
//                 -                2-1 /c       -         -         -         -
//                 3-2 /d           3-1 /c       -         -         -         -
//                 4-3 to 4-2 /d    4-1 /c       -         -         -         -
//                 5-4 to 5-3 /d    5-1 /c       -         -         -         -
//                 etc.
//
//   $col = 3
//                 -                (2-1)        -         -         -         -
//                 -                3-2 /c       3-1 /c    -         -         -
//                 4-3 /d           4-2 /c       4-1 /c    -         -         -
//                 5-4 to 5-3 /d    5-2 /c       5-1 /c    -         -         -
//                 6-4 to 6-3 /d    6-2 /c       6-1 /c    -         -         -
//                 etc.
//
//   $col = 4
//                 -                (2-1)        -         -         -         -
//                 -                (3-2)        (3-1)     -         -         -
//                 -                4-3 /c       4-2 /c    4-1 /c    -         -
//                 5-4 /d           5-3 /c       5-2 /c    5-1 /c    -         -
//                 6-5 to 6-4 /d    6-3 /c       6-2 /c    6-1 /c    -         -
//                 etc.
//   etc.

          @if $i > 1 {
            @for $j from 1 through $i - 1 {
              .bloc-#{$screen-n}-#{$i}-#{$j} {
// c:
                @if $i >= $col and $j < $col  {
                  @extend %bloc-width-#{$screen}-#{$col - $j};
                }
// d:
                @else if $i >= $col and $j >= $col {
      						@extend %bloc-width-#{$screen}-#{1};
                }
              }
            }
          }

        }
      }
    }
  }
}
