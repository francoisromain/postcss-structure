/*
      Grid 
-------------------------------

Using Floats

*/

.container {
  padding-left:  $container-padding * 1rem;
  padding-right: $container-padding * 1rem;
  margin-right:  auto;
  margin-left:   auto;
}
.grid {
  margin-right:  -$gutter * 1rem;
  clear:         both;
  &:after {
    content: "";
    display: table;
    clear: both;
  }
}

.bloc {
  margin-right: $gutter * 1rem;
  margin-bottom: $gutter * 1rem;
  clear: both;
}
.bloc-mini {
  float: left;
  width: 100%;
}

%bloc {
  float: left;
  clear: none;
}

.bloc-left {
  @extend %bloc;
}

$one-half: ($col-width / 2) - $gutter  * 1rem;
$one-third: ($col-width / 3) - $gutter  * 1rem;
$two-third: 10.33rem;

.bloc-one-half {
  width: $one-half;
  @extend %bloc;
}

.bloc-one-third {
  width: $one-third;
  text-align: center;
  @extend %bloc;
}

.bloc-two-third {
  width: $two-third;
  @extend %bloc;
}


$n: 1; 

@while (($col-width / $n) - $gutter > $thumb-min-width) {
  $n: $n + 1;
}

$thumb: ($col-width / ($n - 1)) - $gutter  * 1rem;

.bloc-thumb {
  width: $thumb;
  text-align: center;
  @extend %bloc;
}

.columns {
  -webkit-column-gap:   $gutter;
  -moz-column-gap:      $gutter;
  column-gap: $gutter;

}

@each $screen, $col in $screens {

  $width: $col * $col-width - $gutter;

  @if $col < $col-min {
    $width: $col-min * $col-width - $gutter;
  } @else if $col > $col-max {
    $width: $col-max * $col-width - $gutter;
  }

  $container-width: $width + 2 * $container-padding;

  @media (min-width: $container-width + 2 * $gutter * 1rem) {

    .container {
      width: $container-width * 1rem;
    }

    .show-#{$screen} {
      display: block !important;
      visibility: visible !important;
    }

    %bloc-float-#{$screen} {
      float: left;
      clear: none;
    }

    @for $i from $col-max through 1 {

      %columns-#{$screen}-#{$i} {
        -webkit-column-count:  $i;
        -moz-column-count:     $i;
        column-count:          $i;
      }

    }

    @for $i from $col-max through 1 {

      %bloc-width-#{$screen}-#{$i} {
        width: (($col-width * $i) - $gutter) * 1rem;
      }

      .bloc-#{$screen}-#{$i} {
        @extend %bloc-float-#{$screen};
      }

      @if $i > 1 and $i < $col-max {
        @for $j from 1 through $col-max - $i {
          .bloc-#{$screen}-#{$i}-#{$j} {
            @extend %bloc-float-#{$screen};
          }
        }
      }
    }

    .#{$screen}-right {
      float: right;
    }

    @each $screen-n, $col-n in $screens {

      @if $col >= $col-n {

        @for $i from 1 through $col-max {



// bloc-$i width
// -------------
//
//   width         1           2            3            4            5         6
//   $col = 1
//       xxs       1 to 7 /a   -            -            -            -         -
//
//   $col = 2
//      xxs        (1)         2 to 7 /a    -            -            -         -
//      xs         1 /b        2 to 7 /a    -            -            -         -
//
//   $col = 3
//      xxs        (1)         (2)          3 to 7 /a    -            -         -
//      xs         (1)         (2)          3 to 7 /a    -            -         -
//      s          1 /b        2 /b         3 to 7 /a    -            -         -
//
//   $col = 4
//     xxs        (1)          (2)         (3)           4 to 7 /a    -         -
//     xs         (1)          (2)         (3)           4 to 7 /a    -         -
//     s          (1)          (2)         (3)           4 to 7 /a    -         -
//     m          1 /b         2 /b        3 /b          4 to 7 /a    -         -
//
//   etc.


          .bloc-#{$screen-n}-#{$i} {
// a:
            @if $i >= $col {
              @extend %bloc-width-#{$screen}-#{$col};
            }
// b:
            @else if $col-n == $col {
              @extend %bloc-width-#{$screen}-#{$i};
            }
          }
          .columns-#{$screen-n}-#{$i} {
// a:
            @if $i >= $col {
              @extend %columns-#{$screen}-#{$col}
            }
// b:
            @else if $col-n == $col {
              @extend %columns-#{$screen}-#{$i}
            }
          }          


// bloc-$i-$j width
// ----------------
//
//   width         1               2                3               4             5

//   $col = 1                  
//                 2-1 > 2-6       -                -               -             -
//                 3-1 > 3-5       -                -               -             -
//                 4-1 > 4-4       -                -               -             -
//                 5-1 > 5-3       -                -               -             -
//                 etc.

//   $col = 2                  
//                 (2-1 > 2-6)     -                -               -             -
//                 (3-1 > 3-5)     -                -               -             -
//                 (4-1 > 4-4)     -                -               -             -
//                 (5-1 > 5-3)     -                -               -             -
//                 etc.
//                   
//   $col = 3                   
//                 (2-2 > 2-6)     2-1              -               -             -
//                 (3-2 > 3-5)     3-1              -               -             -
//                 (4-2 > 4-4)     4-1              -               -             -
//                 (5-2 > 5-3)     5-1              -               -             -
//                 (6-2)           6-1              -               -             -
//                 -               7-1              -               -             -
//                  
//                  
//   $col = 4                  
//                 (2-3 > 2-6)     2-2 (2-1)        -               -             -
//                 (3-3 > 3-5)     3-2              3-1             -             -
//                 (4-3 > 4-4)     4-2              4-1             -             -
//                 (5-3)           5-2              5-1             -             -
//                 -               6-2              6-1             -             -
//                 -               -                7-1             -             -
              
//                 
//   $col = 5                 
//                 (2-4 > 2-6)     2-3 (2-1 > 2-2)  -               -             -
//                 (3-4 > 3-5)     3-3              3-2 (3-1)       -             -
//                 (4-4)           4-3              4-2             4-1           -
//                 -               5-3              5-2             5-1           -
//                 -               -                6-2             6-1           -
//                 -               -                -               7-1
                 
//   $col = 6                 
//                 (2-5 > 2-6)     2-4 (2-1 > 2-3)  -               -             -
//                 (3-5)           3-4              3-3 (3-2 > 3-1) -             -
//                 -               4-4              4-3             4-2 (4-1)     -
//                 -               5-4              5-3             5-2           5-1
//                 -               -                -               6-2           6-1
//                 -               -                -               -             7-1

//   etc.

          @if $i > 1 and $i < $col-max {
            @for $j from 1 through $col-max - $i {

              .bloc-#{$screen-n}-#{$i}-#{$j} {
// c:
                @if $i + $j >= $col and $col - $j > 1 {
                   @extend %bloc-width-#{$screen}-#{$col - $j};
                }
// d:
                @else if $col == $col-n  {
                  @extend %bloc-width-#{$screen}-#{1};
                }

              }
              .columns-#{$screen-n}-#{$i}-#{$j} {
// c:
                @if $i + $j >= $col and $col - $j > 1 {
                  @extend %columns-#{$screen}-#{$col - $j};
                }
// d:
                @else if $col == $col-n  {
                  @extend %columns-#{$screen}-#{1};
                }

              }
            }
          }

        }
      }
    }
  }
}
